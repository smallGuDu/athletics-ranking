<!DOCTYPE html>
<html>
<head>
    <title>简单测试</title>
</head>
<body>
    <h1>简单API测试</h1>
    
    <button onclick="testAdd()">测试添加数据</button>
    <button onclick="testGet()">测试获取数据</button>
    
    <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>
    
    <script>
        function testAdd() {
            const data = {
                name: "测试用户" + Date.now(),
                distance: 5.5,
                pace: "6:30",
                date: new Date().toISOString().split('T')[0],
                reflections: "这是一个测试"
            };
            
            fetch('/.netlify/functions/add-data', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            })
            .then(r => r.json())
            .then(result => {
                document.getElementById('result').innerHTML = 
                    '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
            })
            .catch(error => {
                document.getElementById('result').innerHTML = '错误: ' + error;
            });
        }
        
        function testGet() {
            fetch('/.netlify/functions/get-data')
            .then(r => r.json())
            .then(data => {
                document.getElementById('result').innerHTML = 
                    '获取到 ' + data.length + ' 条记录:<br>' +
                    '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
            })
            .catch(error => {
                document.getElementById('result').innerHTML = '错误: ' + error;
            });
        }
    </script>
</body>
</html>
